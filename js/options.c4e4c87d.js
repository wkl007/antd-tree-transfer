(self.webpackChunkantd_tree_transfer=self.webpackChunkantd_tree_transfer||[]).push([[798],{521:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return E}});var h=i(252);const r=(0,h.HX)("data-v-225421f1");(0,h.dD)("data-v-225421f1");const a={class:"transfer-wrapper"};(0,h.Cn)();const d=r(((e,t,i,r,d,s)=>{const n=(0,h.up)("transfer");return(0,h.wg)(),(0,h.j4)("div",a,[(0,h.Wm)(n,{"tree-data":e.treeData,"edit-key":e.editKey},null,8,["tree-data","edit-key"])])})),s=(0,h.HX)("data-v-5be63203");(0,h.dD)("data-v-5be63203");const n=(0,h.Uk)("暂无数据"),c=(0,h.Uk)("暂无数据");(0,h.Cn)();const l=s(((e,t,i,r,a,d)=>{const l=(0,h.up)("a-tree"),y=(0,h.up)("a-empty"),f=(0,h.up)("a-transfer");return(0,h.wg)(),(0,h.j4)(f,{"data-source":e.dataSource,"target-keys":e.targetKeys,render:e=>e.title,"show-select-all":!1,titles:["1","2"],onChange:e.onChange},{children:s((({direction:i,selectedKeys:r,onItemSelect:a})=>["left"===i?((0,h.wg)(),(0,h.j4)(h.HY,{key:0},[e.leftTreeData.length?((0,h.wg)(),(0,h.j4)(l,{key:0,blockNode:"",checkable:"",defaultExpandAll:"","tree-data":e.leftTreeData,"checked-keys":e.leftCheckedKey,onCheck:(t,i)=>{e.handleLeftChecked(t,i,[...r,...e.targetKeys],a)}},null,8,["tree-data","checked-keys","onCheck"])):((0,h.wg)(),(0,h.j4)(y,{key:1},{description:s((()=>[n])),_:1}))],64)):"right"===i?((0,h.wg)(),(0,h.j4)(h.HY,{key:1},[e.rightTreeData.length?((0,h.wg)(),(0,h.j4)(l,{key:0,blockNode:"",checkable:"",defaultExpandAll:"","tree-data":e.rightTreeData,"checked-keys":e.rightCheckedKey,"onUpdate:checked-keys":t[1]||(t[1]=t=>e.rightCheckedKey=t),"expanded-keys":e.rightExpandedKey,"onUpdate:expanded-keys":t[2]||(t[2]=t=>e.rightExpandedKey=t),onCheck:(t,i)=>{e.handleRightChecked(t,i,[...r,...e.targetKeys],a)}},null,8,["tree-data","checked-keys","expanded-keys","onCheck"])):((0,h.wg)(),(0,h.j4)(y,{key:1},{description:s((()=>[c])),_:1}))],64)):(0,h.ry)("",!0)])),_:1},8,["data-source","target-keys","render","onChange"])}));function y(e){return JSON.parse(JSON.stringify(e))}function f(e,t=!1){let i=[];const h=[];for(i=i.concat(JSON.parse(JSON.stringify(e)));i.length;){const e=i.shift();e?.children&&(i=i.concat(e.children),t||delete e.children),h.push(e)}return h}function k(e,t,i=0,h="parentId"){return e.forEach((r=>{if(r[h]===i){const i={...r,children:[]};k(e,i.children,r.id,h),i.children?.length||delete i.children,t.push(i)}})),t}function o(e,t){return t?.forEach((t=>{t?.children?.length?o(e,t.children):e.push(t.key)})),e}function K(e,t){return-1!==e.indexOf(t)}function g(e,t,i="right"){return e.forEach((e=>{"right"===i?e.disabled=t.includes(e.key):"left"===i&&e.disabled&&t.includes(e.key)&&(e.disabled=!1),e.children&&g(e.children,t,i)})),e}function p(e,t,i="right"){const h=f(e),r=[],a=[];return h.forEach((e=>{if("right"===i){if(t.includes(e.key)){const t={...e};t.children&&delete t.children,r.push({...t})}}else if("left"===i&&!t.includes(e.key)){const t={...e};t.children&&delete t.children,r.push({...t})}})),k(r,a,0),a}function u(e,t){return e.forEach((e=>{t.push(e),e.children&&u(e.children,t)})),t}var C=(0,h.aZ)({name:"OptionsTransfer",props:{treeData:{type:Array,default:()=>[]},editKey:{type:Array,default:()=>[]}},data:()=>({targetKeys:[],dataSource:[],leftCheckedKey:[],leftHalfCheckedKeys:[],leftCheckedAllKey:[],leftTreeData:[],rightCheckedKey:[],rightCheckedAllKey:[],rightExpandedKey:[],rightTreeData:[],emitKeys:[],deepList:[]}),watch:{treeData:{deep:!0,handler(e){this.processTreeData()}},editKey:{deep:!0,handler(e){this.processTreeData()}}},created(){this.processTreeData()},methods:{processTreeData(){u(y(this.treeData),this.dataSource),this.editKey.length?this.processEditData():this.leftTreeData=g(y(this.treeData),this.leftCheckedKey)},processEditData(){this.leftCheckedAllKey=this.editKey,this.rightExpandedKey=this.editKey,this.targetKeys=this.editKey,this.rightTreeData=p(y(this.treeData),this.editKey),o(this.deepList,this.treeData),this.leftCheckedKey=function(e,t){const i=[];for(const h in t)for(const r in e)e[r]===t[h]&&i.push(e[r]);return i}(this.editKey,this.deepList),this.leftHalfCheckedKeys=this.leftCheckedAllKey.filter((e=>-1===this.leftCheckedKey.indexOf(e))),this.leftTreeData=g(y(this.treeData),this.leftCheckedKey),this.emitKeys=this.rightExpandedKey},onChange(e,t){"right"===t?(this.targetKeys=this.leftCheckedAllKey,this.rightCheckedKey=[],this.rightTreeData=p(y(this.treeData),this.leftCheckedAllKey,"right"),this.leftTreeData=g(y(this.treeData),this.leftCheckedKey,"right")):"left"===t&&(this.rightTreeData=p(this.rightTreeData,this.rightCheckedKey,"left"),this.leftTreeData=g(this.leftTreeData,this.rightCheckedKey,"left"),this.leftCheckedKey=this.leftCheckedKey.filter((e=>-1===this.rightCheckedKey.indexOf(e))),this.targetKeys=this.targetKeys.filter((e=>-1===this.rightCheckedKey.indexOf(e))),this.leftHalfCheckedKeys=this.leftHalfCheckedKeys.filter((e=>-1===this.rightCheckedKey.indexOf(e))),this.rightCheckedKey=[]),this.rightExpandedKey=f(this.rightTreeData).map((e=>e.key)),this.emitKeys=this.rightExpandedKey},handleLeftChecked(e,{node:t,halfCheckedKeys:i},h,r){this.leftCheckedKey=e,this.leftHalfCheckedKeys=[...new Set([...this.leftHalfCheckedKeys,...i])],this.leftCheckedAllKey=[...new Set([...this.leftHalfCheckedKeys,...i,...e])];const{eventKey:a}=t;r(a,!K(h,a))},handleRightChecked(e,{node:t,halfCheckedKeys:i},h,r){this.rightCheckedKey=e,this.rightCheckedAllKey=[...i,...e];const{eventKey:a}=t;r(a,K(e,a))}}});C.render=l,C.__scopeId="data-v-5be63203";var D=C;var T={treeData:[{id:1,parentId:0,key:"0",title:"工作台"},{id:2,parentId:0,key:"2",title:"仪表盘",children:[{id:3,parentId:2,key:"3",title:"欢迎页"},{id:4,parentId:2,key:"4",title:"分析页"},{id:5,parentId:2,key:"5",title:"监控页"}]},{id:6,parentId:0,key:"6",title:"表单页",children:[{id:7,parentId:6,key:"7",title:"基础表单"},{id:8,parentId:6,key:"8",title:"分步表单"},{id:9,parentId:6,key:"9",title:"高级表单"}]}],editKey:["6","9"]},x=(0,h.aZ)({name:"Options",components:{Transfer:D},data:()=>({treeData:T.treeData,editKey:T.editKey})});x.render=d,x.__scopeId="data-v-225421f1";var E=x}}]);