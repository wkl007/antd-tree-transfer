(self.webpackChunkantd_tree_transfer=self.webpackChunkantd_tree_transfer||[]).push([[798],{4:function(e,t,h){"use strict";h.r(t),h.d(t,{default:function(){return x}});var a=h(252);const i=(0,a.HX)("data-v-225421f1");(0,a.dD)("data-v-225421f1");const d={class:"transfer-wrapper"};(0,a.Cn)();const r=i(((e,t,h,i,r,s)=>{const n=(0,a.up)("transfer");return(0,a.wg)(),(0,a.j4)("div",d,[(0,a.Wm)(n,{"tree-data":e.treeData,"edit-key":e.editKey},null,8,["tree-data","edit-key"])])})),s=(0,a.HX)("data-v-93e50252");(0,a.dD)("data-v-93e50252");const n=(0,a.Uk)("暂无数据"),l=(0,a.Uk)("暂无数据");(0,a.Cn)();const c=s(((e,t,h,i,d,r)=>{const c=(0,a.up)("a-tree"),y=(0,a.up)("a-empty"),f=(0,a.up)("a-transfer");return(0,a.wg)(),(0,a.j4)(f,{"data-source":e.dataSource,"target-keys":e.targetKeys,render:e=>e.title,"show-select-all":!1,onChange:e.onChange},{children:s((({direction:h,selectedKeys:i,onItemSelect:d})=>["left"===h?((0,a.wg)(),(0,a.j4)(a.HY,{key:0},[e.leftTreeData.length?((0,a.wg)(),(0,a.j4)(c,{key:0,blockNode:"",checkable:"",defaultExpandAll:"",modelValue:e.leftCheckedKey,"onUpdate:modelValue":t[1]||(t[1]=t=>e.leftCheckedKey=t),"tree-data":e.leftTreeData,"checked-keys":e.leftCheckedKey,"onUpdate:checked-keys":t[2]||(t[2]=t=>e.leftCheckedKey=t),onCheck:(t,h)=>{e.handleLeftChecked(t,h,[...i,...e.targetKeys],d)}},null,8,["modelValue","tree-data","checked-keys","onCheck"])):((0,a.wg)(),(0,a.j4)(y,{key:1},{description:s((()=>[n])),_:1}))],64)):"right"===h?((0,a.wg)(),(0,a.j4)(a.HY,{key:1},[e.rightTreeData.length?((0,a.wg)(),(0,a.j4)(c,{key:0,blockNode:"",checkable:"",defaultExpandAll:"","tree-data":e.rightTreeData,"checked-keys":e.rightCheckedKey,"onUpdate:checked-keys":t[3]||(t[3]=t=>e.rightCheckedKey=t),"expanded-keys":e.rightExpandedKey,"onUpdate:expanded-keys":t[4]||(t[4]=t=>e.rightExpandedKey=t),onCheck:(t,h)=>{e.handleRightChecked(t,h,[...i,...e.targetKeys],d)}},null,8,["tree-data","checked-keys","expanded-keys","onCheck"])):((0,a.wg)(),(0,a.j4)(y,{key:1},{description:s((()=>[l])),_:1}))],64)):(0,a.ry)("",!0)])),_:1},8,["data-source","target-keys","render","onChange"])}));function y(e){return JSON.parse(JSON.stringify(e))}function f(e,t=!1){let h=[];const a=[];for(h=h.concat(JSON.parse(JSON.stringify(e)));h.length;){const e=h.shift();e?.children&&(h=h.concat(e.children),t||delete e.children),a.push(e)}return a}function k(e,t,h=0,a="parentId"){return e.forEach((i=>{if(i[a]===h){const h={...i,children:[]};k(e,h.children,i.id,a),h.children?.length||delete h.children,t.push(h)}})),t}function o(e,t){return t?.forEach((t=>{t?.children?.length?o(e,t.children):e.push(t.key)})),e}function K(e,t,h="right"){return e.forEach((e=>{"right"===h?e.disabled=t.includes(e.key):"left"===h&&e.disabled&&t.includes(e.key)&&(e.disabled=!1),e.children&&K(e.children,t,h)})),e}function g(e,t,h="right"){const a=f(e),i=[],d=[];return a.forEach((e=>{if("right"===h){if(t.includes(e.key)){const t={...e};t.children&&delete t.children,i.push({...t})}}else if("left"===h&&!t.includes(e.key)){const t={...e};t.children&&delete t.children,i.push({...t})}})),k(i,d,0),d}function p(e,t){return e.forEach((e=>{t.push(e),e.children&&p(e.children,t)})),t}var u=(0,a.aZ)({name:"OptionsTransfer",props:{treeData:{type:Array,default:()=>[]},editKey:{type:Array,default:()=>[]}},data:()=>({targetKeys:[],dataSource:[],leftCheckedKey:[],leftHalfCheckedKeys:[],leftCheckedAllKey:[],leftTreeData:[],rightCheckedKey:[],rightCheckedAllKey:[],rightExpandedKey:[],rightTreeData:[],emitKeys:[],deepList:[]}),watch:{treeData:{deep:!0,handler(e){this.processTreeData()}},editKey:{deep:!0,handler(e){this.processTreeData()}}},created(){this.processTreeData()},methods:{processTreeData(){p(y(this.treeData),this.dataSource),this.editKey.length?this.processEditData():this.leftTreeData=K(y(this.treeData),this.leftCheckedKey)},processEditData(){this.leftCheckedAllKey=this.editKey,this.rightExpandedKey=this.editKey,this.targetKeys=this.editKey,this.rightTreeData=g(y(this.treeData),this.editKey),o(this.deepList,this.treeData),this.leftCheckedKey=function(e,t){const h=[];for(const a in t)for(const i in e)e[i]===t[a]&&h.push(e[i]);return h}(this.editKey,this.deepList),this.leftHalfCheckedKeys=this.leftCheckedAllKey.filter((e=>-1===this.leftCheckedKey.indexOf(e))),this.leftTreeData=K(y(this.treeData),this.leftCheckedKey),this.emitKeys=this.rightExpandedKey},onChange(e,t){"right"===t?(this.targetKeys=this.leftCheckedAllKey,this.rightCheckedKey=[],this.rightTreeData=g(y(this.treeData),this.leftCheckedAllKey,"right"),this.leftTreeData=K(y(this.treeData),this.leftCheckedKey,"right")):"left"===t&&(this.rightTreeData=g(this.rightTreeData,this.rightCheckedKey,"left"),this.leftTreeData=K(this.leftTreeData,this.rightCheckedKey,"left"),this.leftCheckedKey=this.leftCheckedKey.filter((e=>-1===this.rightCheckedKey.indexOf(e))),this.targetKeys=this.targetKeys.filter((e=>-1===this.rightCheckedKey.indexOf(e))),this.leftHalfCheckedKeys=this.leftHalfCheckedKeys.filter((e=>-1===this.rightCheckedKey.indexOf(e))),this.rightCheckedKey=[]),this.rightExpandedKey=f(this.rightTreeData).map((e=>e.key)),this.emitKeys=this.rightExpandedKey},handleLeftChecked(e,{node:t,halfCheckedKeys:h},a,i){this.leftCheckedKey=e,this.leftHalfCheckedKeys=[...new Set([...this.leftHalfCheckedKeys,...h])],this.leftCheckedAllKey=[...new Set([...this.leftHalfCheckedKeys,...h,...e])];const{eventKey:d}=t;i(d,!0)},handleRightChecked(e,{node:t,halfCheckedKeys:h},a,i){this.rightCheckedKey=e,this.rightCheckedAllKey=[...h,...e];const{eventKey:d}=t;i(d,function(e,t){return-1!==e.indexOf(t)}(e,d))}}});u.render=c,u.__scopeId="data-v-93e50252";var C=u;var D={treeData:[{id:1,parentId:0,key:"0",title:"工作台"},{id:2,parentId:0,key:"2",title:"仪表盘",children:[{id:3,parentId:2,key:"3",title:"欢迎页"},{id:4,parentId:2,key:"4",title:"分析页"},{id:5,parentId:2,key:"5",title:"监控页"}]},{id:6,parentId:0,key:"6",title:"表单页",children:[{id:7,parentId:6,key:"7",title:"基础表单"},{id:8,parentId:6,key:"8",title:"分步表单"},{id:9,parentId:6,key:"9",title:"高级表单"}]}],editKey:["6","9"]},T=(0,a.aZ)({name:"Options",components:{Transfer:C},data:()=>({treeData:D.treeData,editKey:D.editKey})});T.render=r,T.__scopeId="data-v-225421f1";var x=T}}]);